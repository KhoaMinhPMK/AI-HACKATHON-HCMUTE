			justify-content: center;
			cursor: pointer;
			color: var(--muted);
		}
			<body>
				<div class="app-shell">
					<aside class="sidebar">
						<div class="sidebar__logo">
							<div class="logo-mark">V</div>
							<div class="logo-copy">
								<strong>Victoria AI</strong>
								<span>Research Suite</span>
							</div>
						</div>
						<div class="sidebar__nav">
							<button class="primary" onclick="newChat()">
								<span style="font-size:20px;">Ôºã</span>
								<div>
									<strong>Phi√™n Lab m·ªõi</strong>
									<span>T·∫°o nh·∫≠t k√Ω th√≠ nghi·ªám</span>
								</div>
							</button>
							<button data-panel="search" onclick="handleSidebarAction('search')">
								<span>üîç</span>
								<div>
									<strong>Search Corpus</strong>
									<span>Qu√©t t√†i li·ªáu tham chi·∫øu</span>
								</div>
							</button>
							<button data-panel="library" onclick="handleSidebarAction('library')">
								<span>üìö</span>
								<div>
									<strong>Library Deck</strong>
									<span>Dataset & m√¥-ƒëun</span>
								</div>
							</button>
							<button data-panel="projects" onclick="handleSidebarAction('projects')">
								<span>üß™</span>
								<div>
									<strong>Research Pipeline</strong>
									<span>Gi√°m s√°t ti·∫øn ƒë·ªô</span>
								</div>
							</button>
						</div>
						<div>
							<p class="sidebar__history-title">Phi√™n g·∫ßn ƒë√¢y <span class="history-badge">4</span></p>
							<div class="sidebar__history">
								<button onclick="loadHistory('Ph√¢n t√≠ch h·ªá gene')">Ph√¢n t√≠ch h·ªá gene</button>
								<button onclick="loadHistory('M√¥ ph·ªèng plasma')">M√¥ ph·ªèng plasma</button>
								<button onclick="loadHistory('D·ª± ƒëo√°n kinh t·∫ø 2032')">D·ª± ƒëo√°n kinh t·∫ø 2032</button>
								<button onclick="loadHistory('T·ªëi ∆∞u h√≥a radar')">T·ªëi ∆∞u h√≥a radar</button>
							</div>
						</div>
						<div class="sidebar__panel">
							<p class="sidebar__panel-eyebrow">Workspace</p>
							<p class="sidebar__panel-title" id="sidebarPanelTitle">B·∫£ng ƒëi·ªÅu khi·ªÉn tƒ©nh</p>
							<p class="sidebar__panel-body" id="sidebarPanelBody">Ch·ªçn thao t√°c ·ªü tr√™n ƒë·ªÉ t·∫£i ghi ch√∫ ho·∫∑c th∆∞ vi·ªán chuy√™n m√¥n t∆∞∆°ng ·ª©ng.</p>
							<button class="sidebar__panel-cta" onclick="openPanelAction()">M·ªü b·∫£ng ƒëi·ªÅu khi·ªÉn</button>
						</div>
					</aside>
					<main class="chat-shell">
						<header class="topbar">
							<div class="topbar__heading">
								<p class="eyebrow">Victoria Research Cloud ¬∑ Phi√™n #12</p>
								<h1>Giao di·ªán AI nghi√™n c·ª©u</h1>
							</div>
							<div class="mode-toggle">
								<button class="active" data-mode="research" onclick="switchMode('research')">Research</button>
								<button data-mode="analysis" onclick="switchMode('analysis')">Analysis</button>
								<button data-mode="deployment" onclick="switchMode('deployment')">Deployment</button>
							</div>
						</header>
						<section class="conversation empty" id="messagesContainer"></section>
						<div class="prompt-palette" id="promptPalette">
							<button onclick="applyPrompt('H√£y thi·∫øt k·∫ø m·ªôt k·∫ø ho·∫°ch th√≠ nghi·ªám ƒë·ªÉ ki·ªÉm ƒë·ªãnh v·∫≠t li·ªáu m·ªõi ch·ªãu nhi·ªát tr√™n 1400¬∞C.')">Thi·∫øt k·∫ø th√≠ nghi·ªám</button>
							<button onclick="applyPrompt('Ph√¢n t√≠ch chu·ªói th·ªùi gian kinh t·∫ø v·ªõi m√¥ h√¨nh k·∫øt h·ª£p ARIMA v√† m·∫°ng n∆°-ron.')">Chu·ªói th·ªùi gian</button>
							<button onclick="applyPrompt('ƒê∆∞a ra gi·∫£ thuy·∫øt v√† b·ªô ch·ªâ s·ªë ki·ªÉm ch·ª©ng cho d·ª± √°n AI y t·∫ø.')">Gi·∫£ thuy·∫øt y sinh</button>
							<button onclick="applyPrompt('Ph√°c th·∫£o pipeline d·ªØ li·ªáu c·∫£m bi·∫øn th·ªùi gian th·ª±c v√† ti√™u chu·∫©n ki·ªÉm ƒë·ªãnh ch·∫•t l∆∞·ª£ng.')">Pipeline d·ªØ li·ªáu</button>
						</div>
						<div class="composer-wrapper" id="composerWrapper">
							<div class="composer">
								<button class="prefix" onclick="togglePromptPalette()" title="G·ª£i √Ω nhanh">Ôºã</button>
								<textarea id="messageInput" rows="1" placeholder="Nh·∫≠p v·∫•n ƒë·ªÅ nghi√™n c·ª©u ho·∫∑c m√¥ t·∫£ d·ª± √°n..." onkeydown="handleKeyPress(event)"></textarea>
								<div class="composer__actions">
									<button class="icon-btn" id="attachBtn" onclick="showToast('Tr√¨nh g·ª≠i t√†i li·ªáu ƒëang chu·∫©n h√≥a ƒë·ªãnh d·∫°ng...')" title="ƒê√≠nh k√®m t√†i li·ªáu">üìé</button>
									<button class="icon-btn" id="voiceInputBtn" onclick="startVoiceInput()" title="Nh·∫•n ƒë·ªÉ n√≥i">
										<svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
											<path stroke-linecap="round" stroke-linejoin="round" d="M12 14a3 3 0 003-3V5a3 3 0 10-6 0v6a3 3 0 003 3z" />
											<path stroke-linecap="round" stroke-linejoin="round" d="M19 11a7 7 0 01-7 7 7 7 0 01-7-7M12 18v4" />
										</svg>
										<div class="voice-wave-mini" id="voiceWaveMini">
											<script src="../../js/config.js"></script>
											<script>
												// Get Groq API key from config
												const GROQ_API_KEY = typeof API_CONFIG !== 'undefined' ? API_CONFIG.GROQ_API_KEY : '';
												
												if (!GROQ_API_KEY) {
													console.error('‚ùå Groq API key not found. Please configure in js/config.js');
												}
												
												class GroqChatClient {
													constructor(apiKey) {
														this.apiKey = apiKey;
														this.baseURL = 'https://api.groq.com/openai/v1/chat/completions';
														this.model = 'openai/gpt-oss-120b';
														this.conversationHistory = [];
													}

													async chat(userMessage) {
														this.conversationHistory.push({
															role: 'user',
															content: userMessage
														});

														const payload = {
															model: this.model,
															messages: this.conversationHistory,
															temperature: 0.7,
															max_completion_tokens: 2048,
															reasoning_effort: 'high',
															include_reasoning: true
														};

														try {
															const response = await fetch(this.baseURL, {
																method: 'POST',
																headers: {
																	'Authorization': `Bearer ${this.apiKey}`,
																	'Content-Type': 'application/json'
																},
																body: JSON.stringify(payload)
															});

															if (!response.ok) {
																throw new Error(`API error: ${response.status}`);
															}

															const data = await response.json();
															const assistantMessage = data.choices[0].message.content;
															const reasoning = data.choices[0].message.reasoning;

															this.conversationHistory.push({
																role: 'assistant',
																content: assistantMessage
															});

															console.log('‚úÖ Groq response:', {
																content_length: assistantMessage.length,
																reasoning_length: reasoning?.length || 0,
																tokens: data.usage
															});

															return {
																content: assistantMessage,
																reasoning: reasoning
															};

														} catch (error) {
															console.error('‚ùå Groq error:', error);
															throw error;
														}
													}

													reset() {
														this.conversationHistory = [];
													}
												}

												const groq = new GroqChatClient(GROQ_API_KEY);
												
												const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
												const recognition = SpeechRecognition ? new SpeechRecognition() : null;
												if (recognition) {
													recognition.lang = 'vi-VN';
													recognition.continuous = false;
													recognition.interimResults = true;
												}

												const synth = window.speechSynthesis;
												const messagesContainer = document.getElementById('messagesContainer');
												const messageInput = document.getElementById('messageInput');
												const sendBtn = document.getElementById('sendBtn');
												const voiceInputBtn = document.getElementById('voiceInputBtn');
												const voiceWaveMini = document.getElementById('voiceWaveMini');
												const promptPalette = document.getElementById('promptPalette');
												const toast = document.getElementById('toast');
												const composerStatus = document.getElementById('composerStatus');
												const panelTitle = document.getElementById('sidebarPanelTitle');
												const panelBody = document.getElementById('sidebarPanelBody');
												const modeButtons = document.querySelectorAll('[data-mode]');
												const sidebarButtons = document.querySelectorAll('[data-panel]');
												let isListening = false;
												let toastTimer = null;

												const panelContent = {
													search: {
														title: 'B·ªô m√°y t√¨m ki·∫øm khoa h·ªçc',
														body: 'K·∫øt n·ªëi ArXiv, Nature API v√† kho n·ªôi b·ªô ƒë·ªÉ truy xu·∫•t nghi√™n c·ª©u c√≥ li√™n quan t·ª©c th·ªùi.'
													},
													library: {
														title: 'Th∆∞ vi·ªán m√¥-ƒëun d·ªØ li·ªáu',
														body: 'K√©o th·∫£ dataset chu·∫©n h√≥a, c·∫•u h√¨nh ETL v√† theo d√µi phi√™n b·∫£n d·ªØ li·ªáu nh·∫°y c·∫£m.'
													},
													projects: {
														title: 'Pipeline ph√¢n t√≠ch',
														body: 'Ph√¢n chia giai ƒëo·∫°n m√¥ ph·ªèng, hu·∫•n luy·ªán v√† ki·ªÉm ƒë·ªãnh ƒë·ªÉ tr√°nh ch·ªìng ch√©o t√†i nguy√™n.'
													}
												};

												const modeCopy = {
													research: 'ƒêang ·ªü ch·∫ø ƒë·ªô Research ¬∑ T·ª± ƒë·ªông ghi ch√∫ ph√≤ng lab',
													analysis: 'Ch·∫ø ƒë·ªô Analysis ¬∑ ∆Øu ti√™n th·ªëng k√™ v√† bi·ªÉu ƒë·ªì th·ªùi gian th·ª±c',
													deployment: 'Ch·∫ø ƒë·ªô Deployment ¬∑ Gi√°m s√°t inference v√† c·∫£nh b√°o b·∫•t th∆∞·ªùng'
												};

												function showToast(message) {
													toast.textContent = message;
													toast.classList.add('visible');
													clearTimeout(toastTimer);
													toastTimer = setTimeout(() => toast.classList.remove('visible'), 2600);
												}

												function handleSidebarAction(action) {
													openContextPanel(action);
													if (panelContent[action]) {
														showToast(`ƒê√£ k√≠ch ho·∫°t ${panelContent[action].title.toLowerCase()}`);
													}
												}

												function openContextPanel(action) {
													sidebarButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.panel === action));
													if (!panelContent[action]) return;
													panelTitle.textContent = panelContent[action].title;
													panelBody.textContent = panelContent[action].body;
												}

												function loadHistory(title) {
													newChat();
													addMessage(`ƒêang ph·ª•c h·ªìi phi√™n "${title}". B·∫°n c√≥ th·ªÉ ti·∫øp t·ª•c ƒë·∫∑t c√¢u h·ªèi ho·∫∑c y√™u c·∫ßu t√≥m t·∫Øt.`, 'ai');
													showToast(`ƒê√£ m·ªü nh·∫≠t k√Ω: ${title}`);
												}

												function switchMode(mode) {
													modeButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.mode === mode));
													composerStatus.innerHTML = `<span class="status-dot"></span>${modeCopy[mode]}`;
													showToast(`ƒê√£ chuy·ªÉn sang ch·∫ø ƒë·ªô ${mode}`);
												}

												function togglePromptPalette() {
													promptPalette.classList.toggle('open');
												}

												function applyPrompt(text) {
													messageInput.value = text;
													autoResize(messageInput);
													toggleSendButton();
													promptPalette.classList.remove('open');
													showToast('ƒê√£ ch√®n g·ª£i √Ω v√†o √¥ nh·∫≠p');
												}

												function prefillPrompt(text) {
													applyPrompt(text);
													messageInput.focus();
												}

												function openPanelAction() {
													showToast('ƒêang m·ªü b·∫£ng ƒëi·ªÅu khi·ªÉn n√¢ng cao...');
												}

												function copySessionNotes() {
													const transcript = Array.from(messagesContainer.querySelectorAll('.bubble'))
														.map(node => node.textContent.trim())
														.join('\n\n');
													navigator.clipboard?.writeText(transcript || 'Ch∆∞a c√≥ n·ªôi dung ƒë·ªÉ sao ch√©p.');
													showToast('ƒê√£ sao ch√©p bi√™n b·∫£n hi·ªán t·∫°i');
												}

												function toggleSendButton() {
													sendBtn.disabled = messageInput.value.trim().length === 0;
												}

												function autoResize(textarea) {
													textarea.style.height = 'auto';
													textarea.style.height = Math.min(textarea.scrollHeight, 180) + 'px';
												}

												function handleKeyPress(event) {
													if (event.key === 'Enter' && !event.shiftKey) {
														event.preventDefault();
														sendMessage();
													}
												}

												messageInput.addEventListener('input', () => {
													autoResize(messageInput);
													toggleSendButton();
												});

												async function sendMessage() {
													const text = messageInput.value.trim();
													if (!text) return;

													// Add user message
													addMessage(text, 'user');
													messageInput.value = '';
													autoResize(messageInput);
													toggleSendButton();

													// Show typing indicator
													const typingId = addTypingIndicator();

													try {
														// Call Groq API
														const response = await groq.chat(text);
														
														// Remove typing indicator
														removeTypingIndicator(typingId);

														// Add AI response
														addMessage(response.content, 'ai', response.reasoning);

														// Optional: Text-to-speech
														if ('speechSynthesis' in window && response.content.length < 300) {
															const utterance = new SpeechSynthesisUtterance(response.content);
															utterance.lang = 'vi-VN';
															utterance.rate = 1.1;
															synth.speak(utterance);
														}

													} catch (error) {
														removeTypingIndicator(typingId);
														addMessage('‚ö†Ô∏è Xin l·ªói, ƒë√£ x·∫£y ra l·ªói k·∫øt n·ªëi v·ªõi AI. Vui l√≤ng th·ª≠ l·∫°i.', 'ai');
														console.error('Send message error:', error);
													}
												}

												function addMessage(text, role, reasoning = null) {
													if (messagesContainer.classList.contains('empty')) {
														messagesContainer.classList.remove('empty');
														messagesContainer.innerHTML = '';
													}

													const row = document.createElement('div');
													row.className = `message-row ${role}`;

													const avatar = document.createElement('div');
													avatar.className = `avatar ${role === 'user' ? 'user' : ''}`;
													avatar.textContent = role === 'user' ? 'B' : 'AI';

													const bubble = document.createElement('div');
													bubble.className = 'bubble';
													
													// Format text with markdown-like syntax
													const formattedText = text
														.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
														.replace(/\n/g, '<br>'); // Line breaks
													
													bubble.innerHTML = formattedText;

													// Add reasoning if available
													if (reasoning && reasoning.length > 0) {
														const reasoningDiv = document.createElement('details');
														reasoningDiv.style.cssText = 'margin-top:1.2rem;padding:1rem;background:#f8f9fa;border-radius:0.8rem;font-size:1.3rem;color:#666;';
														reasoningDiv.innerHTML = `
															<summary style="cursor:pointer;font-weight:600;color:#5cc0eb;">ü§î Qu√° tr√¨nh suy lu·∫≠n (${reasoning.length} chars)</summary>
															<div style="margin-top:0.8rem;line-height:1.6;white-space:pre-wrap;">${reasoning}</div>
														`;
														bubble.appendChild(reasoningDiv);
													}

													row.appendChild(avatar);
													row.appendChild(bubble);
													messagesContainer.appendChild(row);
													messagesContainer.scrollTop = messagesContainer.scrollHeight;
												}

												function addTypingIndicator() {
													const id = 'typing-' + Date.now();
													const row = document.createElement('div');
													row.className = 'message-row ai';
													row.id = id;

													const avatar = document.createElement('div');
													avatar.className = 'avatar';
													avatar.textContent = 'AI';

													const bubble = document.createElement('div');
													bubble.className = 'bubble';
													bubble.innerHTML = '<div class="typing-dots"><span></span><span></span><span></span></div>';
													bubble.style.padding = '1.6rem 2rem';

													row.appendChild(avatar);
													row.appendChild(bubble);
													messagesContainer.appendChild(row);
													messagesContainer.scrollTop = messagesContainer.scrollHeight;

													return id;
												}

												function removeTypingIndicator(id) {
													const el = document.getElementById(id);
													if (el) el.remove();
												}

												function startVoiceInput() {
													if (!recognition) {
														showToast('Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ nh·∫≠n d·∫°ng gi·ªçng n√≥i.');
														return;
													}

													if (isListening) {
														recognition.stop();
														return;
													}

													recognition.start();
													isListening = true;
													voiceInputBtn.classList.add('listening');
													voiceWaveMini.classList.add('active');
													showToast('ƒêang l·∫Øng nghe...');
												}

												if (recognition) {
													recognition.onresult = (event) => {
														const transcript = Array.from(event.results).map(r => r[0].transcript).join('');
														messageInput.value = transcript;
														autoResize(messageInput);
														toggleSendButton();
													};

													recognition.onend = () => {
														isListening = false;
														voiceInputBtn.classList.remove('listening');
														voiceWaveMini.classList.remove('active');
													};

													recognition.onerror = (event) => {
														console.error('Speech recognition error:', event.error);
														isListening = false;
														voiceInputBtn.classList.remove('listening');
														voiceWaveMini.classList.remove('active');
														showToast('Kh√¥ng th·ªÉ ghi √¢m, vui l√≤ng th·ª≠ l·∫°i.');
													};
												}

												function renderEmptyState() {
													messagesContainer.classList.add('empty');
													messagesContainer.innerHTML = `
														<div class="empty-state">
															<p class="eyebrow">Victoria Quantum Atlas</p>
															<h2>Ph√≤ng th√≠ nghi·ªám ·∫£o c·ªßa b·∫°n s·∫µn s√†ng</h2>
															<p class="subtitle">Nh·∫≠p c√¢u h·ªèi nghi√™n c·ª©u, m√¥ t·∫£ d·ªØ li·ªáu ho·∫∑c y√™u c·∫ßu m√¥ ph·ªèng. Victoria AI s·∫Ω k·∫øt n·ªëi kho tri th·ª©c v√† c√¥ng c·ª• ph√¢n t√≠ch chuy√™n s√¢u ƒë·ªÉ h·ªó tr·ª£.</p>
															<div class="lab-highlights">
																<div class="highlight-card">
																	<strong>Precision 99.2%</strong>
																	<span>M·∫´u inference tu·∫ßn n√†y</span>
																</div>
																<div class="highlight-card">
																	<strong>12 d·ª± √°n</strong>
																	<span>ƒêang ƒë∆∞·ª£c theo d√µi</span>
																</div>
																<div class="highlight-card">
																	<strong>0 c·∫£nh b√°o</strong>
																	<span>Hi·ªáu nƒÉng m√¥ ph·ªèng</span>
																</div>
															</div>
															<div class="quick-prompts">
																<button class="quick-chip" onclick="prefillPrompt('So·∫°n k·∫ø ho·∫°ch th·∫©m ƒë·ªãnh ƒë·∫°o ƒë·ª©c cho nghi√™n c·ª©u AI y t·∫ø d·ª± ƒëo√°n s·ªõm b·ªánh hi·∫øm.')">ƒê·∫°o ƒë·ª©c AI</button>
																<button class="quick-chip" onclick="prefillPrompt('T·ªïng h·ª£p insight t·ª´ 3 dataset kh√≠ t∆∞·ª£ng ƒë·ªÉ d·ª± ph√≥ng El Ni√±o.')">Kh√≠ t∆∞·ª£ng</button>
																<button class="quick-chip" onclick="prefillPrompt('ƒê·ªÅ xu·∫•t pipeline hu·∫•n luy·ªán m√¥ h√¨nh ƒëa modal cho ·∫£nh v·ªá tinh v√† d·ªØ li·ªáu vƒÉn b·∫£n.')">ƒêa modal</button>
																<button class="quick-chip" onclick="prefillPrompt('T·∫°o m·ª•c ti√™u OKR cho nh√≥m nghi√™n c·ª©u v·∫≠t li·ªáu b√°n d·∫´n th·∫ø h·ªá m·ªõi.')">OKR Lab</button>
															</div>
														</div>
													`;
												}

												function newChat() {
													groq.reset(); // Reset conversation history
													renderEmptyState();
													messageInput.value = '';
													autoResize(messageInput);
													toggleSendButton();
													showToast('‚ú® ƒê√£ t·∫°o phi√™n chat m·ªõi v·ªõi AI reasoning model');
												}

												newChat();
												openContextPanel('search');
											</script>
					padding: 32px;
					display: flex;
					flex-direction: column;
					backdrop-filter: blur(18px);
				}

				.topbar {
					display: flex;
					justify-content: space-between;
					align-items: center;
					margin-bottom: 16px;
				}

				.topbar__heading .eyebrow {
					font-size: 12px;
					letter-spacing: 0.2em;
					color: var(--muted);
					text-transform: uppercase;
				}

				.topbar__heading h1 {
					font-size: 24px;
					font-weight: 600;
				}

				.mode-toggle {
					display: flex;
					gap: 8px;
					background: rgba(255,255,255,0.04);
					padding: 6px;
					border-radius: 999px;
					border: 1px solid var(--border);
				}

				.mode-toggle button {
					border: none;
					background: transparent;
					color: var(--muted);
					padding: 8px 16px;
					border-radius: 999px;
					cursor: pointer;
					font-size: 13px;
					transition: background 0.2s ease, color 0.2s ease;
				}

			.mode-toggle button.active {
				background: rgba(92, 192, 235, 0.2);
				color: var(--text);
				border-color: #5cc0eb;
			}				.conversation {
					flex: 1;
					overflow-y: auto;
					padding: 8px 16px 32px;
					display: flex;
					flex-direction: column;
					gap: 18px;
					align-items: center;
				}

				.conversation::-webkit-scrollbar {
					width: 6px;
				}

				.conversation::-webkit-scrollbar-thumb {
					background: rgba(255,255,255,0.1);
					border-radius: 999px;
				}

				.conversation.empty {
					justify-content: center;
				}

				.empty-state {
					text-align: center;
					max-width: 620px;
					display: flex;
					flex-direction: column;
					gap: 18px;
				}

				.empty-state h2 {
					font-size: 32px;
					font-weight: 600;
				}

				.empty-state .subtitle {
					color: var(--muted);
					line-height: 1.6;
				}

				.lab-highlights {
					display: grid;
					grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
					gap: 12px;
				}

				.highlight-card {
					border: 1px solid var(--border);
					border-radius: 18px;
					padding: 14px;
					background: rgba(255,255,255,0.02);
					text-align: left;
				}

				.highlight-card strong {
					font-size: 14px;
				}

				.highlight-card span {
					color: var(--muted);
					font-size: 13px;
				}

				.quick-prompts,
				.prompt-palette {
					display: flex;
					gap: 8px;
					flex-wrap: wrap;
					justify-content: center;
				}

				.quick-chip,
				.prompt-palette button {
					border: 1px solid var(--border);
					background: rgba(255,255,255,0.03);
					color: var(--text);
					border-radius: 999px;
					padding: 8px 14px;
					font-size: 13px;
					cursor: pointer;
					transition: border 0.2s ease, background 0.2s ease;
				}

				.quick-chip:hover,
				.prompt-palette button:hover {
					border-color: var(--accent);
					background: rgba(125,216,255,0.08);
				}

				.prompt-palette {
					margin: 0 auto 12px;
					max-width: 760px;
					background: rgba(255,255,255,0.03);
					border-radius: 20px;
					padding: 12px;
					border: 1px solid var(--border);
					display: none;
				}

				.prompt-palette.open {
					display: flex;
				}

				.message-row {
					display: flex;
					gap: 16px;
					width: 100%;
					max-width: 760px;
				}

				.message-row.user {
					flex-direction: row-reverse;
				}

				.avatar {
					width: 44px;
					height: 44px;
					border-radius: 14px;
					background: rgba(255,255,255,0.08);
					display: flex;
					align-items: center;
					justify-content: center;
					font-weight: 600;
				}

				.avatar.user {
					background: #5cc0eb;
					color: #ffffff;
				}

				.bubble {
					border: 1px solid var(--border);
					border-radius: 20px;
					padding: 18px;
					background: rgba(255,255,255,0.04);
					line-height: 1.7;
					font-size: 15px;
				}

				/* Typing indicator animation */
				.typing-dots {
					display: flex;
					gap: 6px;
					align-items: center;
				}

				.typing-dots span {
					width: 8px;
					height: 8px;
					border-radius: 50%;
					background: #5cc0eb;
					animation: typingBounce 1.4s infinite ease-in-out;
				}

				.typing-dots span:nth-child(1) { animation-delay: 0s; }
				.typing-dots span:nth-child(2) { animation-delay: 0.2s; }
				.typing-dots span:nth-child(3) { animation-delay: 0.4s; }

				@keyframes typingBounce {
					0%, 60%, 100% { transform: translateY(0); opacity: 0.7; }
					30% { transform: translateY(-10px); opacity: 1; }
				}

				.message-row.user .bubble {
					background: rgba(92, 192, 235, 0.15);
					color: #1f2937;
					border-color: rgba(92, 192, 235, 0.3);
					font-weight: 500;
				}

				.composer-wrapper {
					margin-top: auto;
				}

				.composer {
					display: flex;
					align-items: center;
					gap: 12px;
					border: 1px solid var(--border);
					border-radius: 30px;
					padding: 12px 16px;
					background: rgba(255,255,255,0.04);
					box-shadow: 0 25px 70px rgba(3, 12, 42, 0.45);
				}

				.composer button.prefix {
					border: 1px solid var(--border);
					background: rgba(255,255,255,0.03);
					color: var(--text);
					border-radius: 14px;
					width: 44px;
					height: 44px;
					cursor: pointer;
					font-size: 20px;
				}

				textarea#messageInput {
					flex: 1;
					border: none;
					background: transparent;
					resize: none;
					color: var(--text);
					font-size: 16px;
					line-height: 1.5;
					max-height: 180px;
					outline: none;
				}

				.composer__actions {
					display: flex;
					gap: 8px;
					align-items: center;
				}

				.icon-btn {
					width: 46px;
					height: 46px;
					border-radius: 16px;
					border: 1px solid var(--border);
					background: rgba(255,255,255,0.03);
					color: var(--text);
					display: flex;
					align-items: center;
					justify-content: center;
					cursor: pointer;
				}

				#sendBtn {
					background: #5cc0eb;
					color: #ffffff;
					border: none;
				}
				
				#sendBtn:hover {
					background: #3da9d4;
				}

				#sendBtn:disabled {
					opacity: 0.4;
					cursor: not-allowed;
				}

				.voice-wave-mini {
					display: flex;
					align-items: flex-end;
					gap: 2px;
					height: 18px;
					margin-left: 6px;
				}

				.voice-wave-mini span {
					width: 3px;
					height: 8px;
					border-radius: 999px;
					background: var(--accent);
					opacity: 0.3;
					transform-origin: center bottom;
				}

				.voice-wave-mini.active span {
					animation: miniWave 1s ease-in-out infinite;
					opacity: 1;
				}

				.composer__status {
					margin-top: 12px;
					font-size: 13px;
					color: var(--muted);
					display: flex;
					align-items: center;
					gap: 8px;
				}

				.status-dot {
					width: 8px;
					height: 8px;
					border-radius: 999px;
					background: var(--accent-strong);
					box-shadow: 0 0 12px var(--accent-strong);
				}

				.toast {
					position: fixed;
					bottom: 28px;
					left: 50%;
					transform: translateX(-50%) translateY(120%);
					padding: 12px 18px;
					border-radius: 12px;
					background: rgba(5, 7, 16, 0.9);
					border: 1px solid var(--border);
					color: var(--text);
					font-size: 14px;
					transition: transform 0.3s ease;
					z-index: 20;
				}

				.toast.visible {
					transform: translateX(-50%) translateY(0);
				}

				@keyframes miniWave {
					0%, 100% { transform: scaleY(0.4); }
					50% { transform: scaleY(1.4); }
				}

				@media (max-width: 1200px) {
					.app-shell {
						grid-template-columns: 1fr;
						padding: 16px;
					}

					aside.sidebar {
						display: none;
					}
				}

				@media (max-width: 640px) {
					main.chat-shell {
						padding: 20px;
					}

					.composer {
						flex-direction: column;
						align-items: stretch;
					}

					.composer button.prefix,
					.icon-btn {
						width: 100%;
					}

					.composer__actions {
						width: 100%;
						justify-content: space-between;
					}
				}
			</style>

